<section class="cuppingattributes">
	<h1>Details</h1>
	<% @samples.each do |sample| %>
	<section class="attributesample" id="sample_<%= sample.id %>">
			<section id="total">		
				<%= render "cupping_total_scores/cupping_total_score", :sample => sample %>
			</section>
			<h2>Sample# <%= sample.sample_number %></h2>
			<% if sample.batch.present? || sample.color.present? %>
				<% if sample.batch.present? %>
					<p>Roast: <%= sample.batch.roast.name %></p>
				<% end %>
				<% if sample.batch.present? %>
					<p>Roastery: <%= sample.batch.roast.roastery.name %></p>
				<% end %>
				<% if sample.batch.present? %>
					<p>Roasted on: <%= sample.batch.roasted_on.to_s(:long) %></p>
				<% end %>
				<% if sample.color.present? %>
					<p>Roast Level: <%= sample.color %></p>
				<% end %>
			<% else %>
			 <p>No info provided.</p>
			<% end %>
		</section>
	<% end %>
</section>

<section class="cuppingattributes">
	<h1>Dry Fragrances</h1>
	<% @samples.each do |sample| %>	
		<% if sample.cupping_dry_fragrances.present? %>
			<%= render :partial => "cupping_dry_fragrances/cupping_dry_fragrance", :collection => sample.cupping_dry_fragrances %>
		<% else %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<%= form_for(sample.cupping_dry_fragrances.build, :remote => true) do |f| %>
					<h2># <%= sample.sample_number %></h2>
					<%= f.hidden_field :sample_id, :value => sample.id %>
					<%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>
					<%= f.label :score %>
					<%= f.select :intensity, options_for_select([["5", "5"], ["4", "4"], ["3", "3"], ["2", "2"], ["1", "1"], ["0", "0"]]), :prompt => true %>
					<%= f.label :intensity %>
					<%= f.text_field :notes %>
					<%= f.label :notes %>
					<%= f.submit "Record Dry Fragrance", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- Crust Aromas	 -->
<section class="cuppingattributes">
	<h1>Crust Aromas</h1>
	<% @samples.each do |sample| %>	
		<% if sample.cupping_crust_aromas.present? %>
			<%= render :partial => "cupping_crust_aromas/cupping_crust_aroma", :collection => sample.cupping_crust_aromas %>
		<% else %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<%= form_for(sample.cupping_crust_aromas.build, :remote => true) do |f| %>
					<h2># <%= sample.sample_number %></h2>
					<%= f.hidden_field :sample_id, :value => sample.id %>
			    <%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>
			    <%= f.label :score %>
			    <%= f.select :intensity, options_for_select([["5", "5"], ["4", "4"], ["3", "3"], ["2", "2"], ["1", "1"], ["0", "0"]]), :prompt => true %>
			    <%= f.label :intensity %>
			    <%= f.text_field :notes %>
			    <%= f.label :notes %>
					<%= f.submit "Record Crust Aroma", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- Break Aromas	 -->
<section class="cuppingattributes">
	<h1>Break Aroma</h1>
	<% @samples.each do |sample| %>	
		<% if sample.cupping_break_aromas.present? %>
			<%= render :partial => "cupping_break_aromas/cupping_break_aroma", :collection => sample.cupping_break_aromas %>
		<% else %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<%= form_for(sample.cupping_break_aromas.build, :remote => true) do |f| %>
					<h2># <%= sample.sample_number %></h2>
					<%= f.hidden_field :sample_id, :value => sample.id %>
			    <%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>
			    <%= f.label :score %>
			    <%= f.select :intensity, options_for_select([["5", "5"], ["4", "4"], ["3", "3"], ["2", "2"], ["1", "1"], ["0", "0"]]), :prompt => true %>
			    <%= f.label :intensity %>
			    <%= f.text_field :notes %>
			    <%= f.label :notes %>
					<%= f.submit "Record Break Aroma", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- Defects	 -->
<section class="cuppingattributes">
	<h1>Defects</h1>
	<% @samples.each do |sample| %>	
		<% if sample.cupping_defects.present? %>
			<%= render :partial => "cupping_defects/cupping_defect", :collection => sample.cupping_defects %>
		<% else %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<%= form_for(sample.cupping_defects.build, :remote => true) do |f| %>
					<h2># <%= sample.sample_number %></h2>
					<%= f.hidden_field :sample_id, :value => sample.id %>
					<%= f.select :intensity, options_for_select([["Fault(4)", "4"], ["Taint(2)", "2"], ["0", "0"]], selected = ["0", "0"]) %>
				  <%= f.label :intensity %>
			    <%= f.submit "Record Defect", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- flavors	 -->
<section class="cuppingattributes">
	<h1>Flavors</h1>
	<% @samples.each do |sample| %>
		<% if sample.cupping_flavors.present? %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<section class="clearfix" id="flavor-show">
					<%= link_to 'Manage', cupping_flavors_path(:sample_id => sample.id), :class => "redlink" %>
					<h2># <%= sample.sample_number %></h2>
					<p>Score: <%= sample.cupping_flavors.average(:score).to_i %></p>
					<% if sample.cupping_flavors.map(&:notes).compact.reject(&:blank?).to_sentence.downcase.present? %>
						<p>Notes: <%= sample.cupping_flavors.map(&:notes).compact.reject(&:blank?).to_sentence.downcase %></p>
					<% end %>
				</section>
				<section class="anotherflavor clearfix">
					<%= form_for(sample.cupping_flavors.build, :remote => true) do |f| %>
						<%= f.hidden_field :sample_id, :value => sample.id %>
						<%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>   
						<%= f.label :score %>
				    <%= f.text_field :notes %>
				    <%= f.label :notes %>
					  <%= f.submit "Record Another", :class => "button" %>
					<% end %>
				</section>
			</section>
		<% else %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<section class="clearfix" id="flavor-show">
					<h2># <%= sample.sample_number %></h2>
				</section>
				<%= form_for(sample.cupping_flavors.build, :remote => true) do |f| %>
					<%= f.hidden_field :sample_id, :value => sample.id %>
					<%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>   
					<%= f.label :score %>
			    <%= f.text_field :notes %>
			    <%= f.label :notes %>
				  <%= f.submit "Record Flavor", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- After taste	 -->
<section class="cuppingattributes" id="after_tastes">
	<h1>After Tastes</h1>
	<% @samples.each do |sample| %>
		<% if sample.cupping_after_tastes.present? %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<section class="clearfix" id="after-taste-show">
					<%= link_to 'Manage', cupping_after_tastes_path(:sample_id => sample.id), :class => "redlink" %>
					<h2># <%= sample.sample_number %></h2>
					<p>Score: <%= sample.cupping_after_tastes.average(:score).to_i %></p>
					<% if sample.cupping_after_tastes.map(&:notes).compact.reject(&:blank?).to_sentence.downcase.present? %>
						<p>Notes: <%= sample.cupping_after_tastes.map(&:notes).compact.reject(&:blank?).to_sentence.downcase %></p>
					<% end %>
				</section>
				<section class="anotheraftertaste clearfix">
					<%= form_for(sample.cupping_after_tastes.build, :remote => true) do |f| %>
						<%= f.hidden_field :sample_id, :value => sample.id %>
						<%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>   
						<%= f.label :score %>
				    <%= f.text_field :notes %>
				    <%= f.label :notes %>
					  <%= f.submit "Record Another", :class => "button" %>
					<% end %>
				</section>
			</section>
		<% else %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<section class="clearfix" id="after-taste-show">
					<h2># <%= sample.sample_number %></h2>
				</section>
				<%= form_for(sample.cupping_after_tastes.build, :remote => true) do |f| %>
					<%= f.hidden_field :sample_id, :value => sample.id %>
					<%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>   
					<%= f.label :score %>
			    <%= f.text_field :notes %>
			    <%= f.label :notes %>
				  <%= f.submit "Record After Taste", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- Acidities	 -->
<section class="cuppingattributes">
	<h1>Acidities</h1>
	<% @samples.each do |sample| %>	
		<% if sample.cupping_acidities.present? %>
			<%= render :partial => "cupping_acidities/cupping_acidity", :collection => sample.cupping_acidities %>
		<% else %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<%= form_for(sample.cupping_acidities.build, :remote => true) do |f| %>
					<h2># <%= sample.sample_number %></h2>
					<%= f.hidden_field :sample_id, :value => sample.id %>
			    <%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>
					<%= f.label :score %>
			    <%= f.select :intensity, options_for_select([["5", "5"], ["4", "4"], ["3", "3"], ["2", "2"], ["1", "1"], ["0", "0"]]), :prompt => true %>
				  <%= f.label :intensity %>
			    <%= f.submit "Record Acidity", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- Mouthfeel	 -->
<section class="cuppingattributes">
	<h1>Mouthfeel</h1>
	<% @samples.each do |sample| %>	
		<% if sample.cupping_mouthfeels.present? %>
			<%= render :partial => "cupping_mouthfeels/cupping_mouthfeel", :collection => sample.cupping_mouthfeels %>
		<% else %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
					<%= form_for(sample.cupping_mouthfeels.build, :remote => true) do |f| %>
					<h2># <%= sample.sample_number %></h2>
						<%= f.hidden_field :sample_id, :value => sample.id %>
						<%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>
				    <%= f.label :score %>
						<%= f.select :weight, options_for_select([["5", "5"], ["4", "4"], ["3", "3"], ["2", "2"], ["1", "1"], ["0", "0"]]), :prompt => true %>
				    <%= f.label :weight %>
					  <%= f.submit "Record Mouthfeel", :class => "button" %>
					<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- Balance	 -->
<section class="cuppingattributes">
	<h1>Balance</h1>
	<% @samples.each do |sample| %>	
		<% if sample.cupping_balances.present? %>
			<%= render :partial => "cupping_balances/cupping_balance", :collection => sample.cupping_balances %>
		<% else %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<%= form_for(sample.cupping_balances.build, :remote => true) do |f| %>
					<h2># <%= sample.sample_number %></h2>
					<%= f.hidden_field :sample_id, :value => sample.id %>
					<%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>
			    <%= f.label :score %>
				  <%= f.submit "Record Balance", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- Sweetness	 -->
<section class="cuppingattributes">
	<h1>Sweetness</h1>
	<% @samples.each do |sample| %>	
		<% if sample.cupping_sweetnesses.present? %>
			<%= render :partial => "cupping_sweetnesses/cupping_sweetness", :collection => sample.cupping_sweetnesses %>
		<% else %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<%= form_for(sample.cupping_sweetnesses.build, :remote => true) do |f| %>
					<h2># <%= sample.sample_number %></h2>
						<%= f.hidden_field :sample_id, :value => sample.id %>
						<%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>
						<%= f.label :score %>
					  <%= f.submit "Record Sweetness", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- Uniformity	 -->
<section class="cuppingattributes">
	<h1>Uniformity</h1>
	<% @samples.each do |sample| %>	
		<% if sample.cupping_uniformities.present? %>
			<%= render :partial => "cupping_uniformities/cupping_uniformity", :collection => sample.cupping_uniformities %>
		<% else %>
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<%= form_for(sample.cupping_uniformities.build, :remote => true) do |f| %>
					<h2># <%= sample.sample_number %></h2>
					<%= f.hidden_field :sample_id, :value => sample.id %>
					<%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>
			    <%= f.label :score %>
				  <%= f.submit "Record Uniformity", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- Clean Cup	 -->
<section class="cuppingattributes">
	<h1>Clean Cup</h1>
	<% @samples.each do |sample| %>	
		<% if sample.cupping_clean_cups.present? %>
			<%= render :partial => "cupping_clean_cups/cupping_clean_cup", :collection => sample.cupping_clean_cups %>
		<% else %>	
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<%= form_for(sample.cupping_clean_cups.build, :remote => true) do |f| %>
					<h2># <%= sample.sample_number %></h2>
					<%= f.hidden_field :sample_id, :value => sample.id %>
					<%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>
				  <%= f.label :score %>
			    <%= f.submit "Record Clean Cup", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>

<!-- Overall	 -->
<section class="cuppingattributes">
	<h1>Overall</h1>
	<% @samples.each do |sample| %>	
		<% if sample.cupping_overalls.present? %>
			<%= render :partial => "cupping_overalls/cupping_overall", :collection => sample.cupping_overalls %>
		<% else %>	
			<section class="attributesample clearfix" id="sample_<%= sample.id %>">
				<%= form_for(sample.cupping_overalls.build, :remote => true) do |f| %>
					<h2># <%= sample.sample_number %></h2>
					<%= f.hidden_field :sample_id, :value => sample.id %>
					<%= f.select :score, options_for_select([["Exceptional(10)", "10"], ["Outstanding(9)", "9"], ["Excellent(8)", "8"], ["Very good(7)", "7"], ["Good(6)", "6"], ["Average(5)", "5"], ["Fair(4)", "4"], ["Poor(3)", "3"], ["Very poor(2)", "2"], ["Unacceptable(1)", "1"], ["Not present(0)", "0"]], selected = ["Good(6)", "6"]) %>
				  <%= f.label :score %>
			    <%= f.submit "Record Overall", :class => "button" %>
				<% end %>
			</section>
		<% end %>
	<% end %>
</section>