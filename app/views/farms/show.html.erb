<header>
	<%= link_to "Back", farms_path %>
</header>
<% if can? :create, Bean %>
	<section>
		<%= link_to 'New Bean', new_bean_path(:farm_id => @farm.id) %>
	</section>
<% end %>
<section>
	<h1><%= @farm.name_and_country %></h1>
</section>
<section>
	<% if @beans.present? %>
		<h1>Beans Produced</h1>
	<% end %>
	<% @beans.each do |bean| %>
		<%= bean.variety %>
		<% if bean.harvest_start.present? or bean.harvest_end.present? %>
			 - Harvested 
		<% end %>
		<% if bean.harvest_start.present? %>
		 	from <%= bean.harvest_start %>
		<% end %>
		<% if bean.harvest_end.present? %>
		 	until <%= bean.harvest_end %>
		<% end %>
		<% if can? :update, bean %>
			<%= link_to 'Edit', edit_bean_path(bean) %>
		<% end %>
		<br>
	<% end %>
</section>
<% if @farm.region.present? || @farm.farmer.present? || @farm.elevation.present? || @farm.description.present? %>
	<section>
		<h1>Details</h1>
		<% if @farm.region.present? %>
	  Region of the country: <%= @farm.region.titleize %><br>
		<% end %>
		<% if @farm.farmer.present? %>
			Humans involved: <%= @farm.farmer.camelcase %><br>
		<% end %>
		<% if @farm.elevation.present? %>	
		  Elevation: <%= @farm.elevation %><br>
		<% end %>
		<% if @farm.description.present? %>
		  Description: <%= @farm.description.camelcase %><br>
		<% end %>
	</section>
<% end %>
<% if can? :update, @farm %>
	<section>
		<%= link_to 'Edit Producer Details', edit_farm_path(@farm) %>
	</section>
<% end %>
<% if current_user.admin?  || @farm.is_padmin?(current_user) %>
	<section>
		<h1>Producer Admins</h1>
		<% @producer_admins.each do |pa| %>
			<%= pa.user.email %> | <%= link_to 'Remove', pa, :confirm => 'Are you sure?', :method => :delete %><br>
		<% end %>
		<%= render 'producer_admins/form' %>
	</section>
<% end %>
<% if current_user.nil? %>
	<footer>
		<nav>
			<%= link_to "Log In", root_url %>
			<menu>
				<%= link_to 'Roasteries', roasteries_url %>
			</menu>
		</nav>
	</footer>
<% end %>